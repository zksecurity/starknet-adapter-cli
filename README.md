# Stone CLI

A CLI for proving and verifying Cairo 1 programs.

## Setup

- Run `cargo install --path .` to build the project and install the CLI

Currently, only `linux/amd64` with `AVX` is supported.

## Usage

- The program must be a Cairo 1 program

### Prove

- Generate a proof for a Cairo 1 program
- `stone-cli prove --cairo_program <program-path>`
- Additional args:
  - `--program_input`
  - `--program_input_file`
  - `--layout`
  - `--prover_config_file`
  - `--parameter_file`
  - `--output`
- Additional args for prover parameters:
  - `--field`
  - `--channel_hash`
  - `--commitment_hash`
  - `--n_verifier_friendly_commitment_layers`
  - `--pow_hash`
  - `--page_hash`
  - `--fri_step_list`
  - `--last_layer_degree_bound`
  - `--n_queries`
  - `--proof_of_work_bits`
  - `--log_n_cosets`
  - `--use_extension_field`
  - `--verifier_friendly_channel_updates`
  - `--verifier_friendly_commitment_hash`
- Additional args for prover config:
  - `--store_full_lde`
  - `--use_fft_for_eval`
  - `--constraint_polynomial_task_size`
  - `--n_out_of_memory_merkle_layers`
  - `--table_prover_n_tasks_per_segment`

### Verify

- Verify a proof generated by the prover
- `stone-cli verify --proof <proof-path>`

### Serialize Proof

- Serialize a proof to a file
- `stone-cli serialize-proof --proof <proof-path> --network <network> --output <output-path>`

Using `--network starknet` serializes the Cairo proof into a format that can be verified on the Cairo verifier deployed on Starknet. Please refer to the [integrity documentation](https://github.com/HerodotusDev/integrity) for more information on how to use the calldata to send a transaction to Starknet.

## Additional Resources

### List of supported builtins per layout

| Layout      | dex | recursive | recursive_with_poseidon | small | starknet | starknet_with_keccak |
| ----------- | :-: | :-------: | :---------------------: | :---: | :------: | :------------------: |
| output      |  O  |     O     |            O            |   O   |    O     |          O           |
| pedersen    |  O  |     O     |            O            |   O   |    O     |          O           |
| range_check |  O  |     O     |            O            |   O   |    O     |          O           |
| bitwise     |  O  |     O     |            O            |       |    O     |          O           |
| ecdsa       |  O  |           |                         |       |    O     |          O           |
| poseidon    |     |           |            O            |       |          |                      |
| ec_op       |     |           |                         |       |    O     |          O           |
| keccak      |     |           |                         |       |          |          O           |
